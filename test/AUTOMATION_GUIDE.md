# PageLens è‡ªå‹•æ¸¬è©¦å¯¦æ–½æŒ‡å—

## ğŸ—ï¸ è‡ªå‹•æ¸¬è©¦æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   é–‹ç™¼è€…å¯«ç¨‹å¼ç¢¼    â”‚ â†’ â”‚   æœ¬åœ°æ¸¬è©¦        â”‚ â†’ â”‚   Commit        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Vercel éƒ¨ç½²    â”‚ â† â”‚   GitHub Push   â”‚ â† â”‚ Pre-commit Testsâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚ GitHub Actions  â”‚
                       â”‚   è‡ªå‹•æ¸¬è©¦       â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ å¯¦æ–½æ­¥é©Ÿè©³è§£

### æ­¥é©Ÿ 1: è¨­ç½®æœ¬åœ°æ¸¬è©¦ç’°å¢ƒ

```bash
# 1. ç¢ºä¿é …ç›®ä¾è³´å·²å®‰è£
npm install

# 2. è¤‡è£½ç’°å¢ƒè®Šæ•¸æ¨¡æ¿
cp .env.example .env

# 3. ç·¨è¼¯ç’°å¢ƒè®Šæ•¸ï¼ˆå¯é¸ï¼‰
# vim .env
```

### æ­¥é©Ÿ 2: æ¸¬è©¦é‹è¡Œç’°å¢ƒ

```bash
# å•Ÿå‹• API æœå‹™å™¨ï¼ˆçµ‚ç«¯ 1ï¼‰
npm start

# é‹è¡Œæ¸¬è©¦ï¼ˆçµ‚ç«¯ 2ï¼‰
npm test

# é æœŸè¼¸å‡ºï¼š
# âœ… Returned 15 assessments (expected: 15)
# âœ… API endpoint testing completed
```

### æ­¥é©Ÿ 3: è¨­ç½® Git Hooksï¼ˆå¯é¸ï¼‰

```bash
# è¨­ç½® pre-commit hook
cp pre-commit-test.sh .git/hooks/pre-commit
chmod +x .git/hooks/pre-commit

# ç¾åœ¨æ¯æ¬¡ commit éƒ½æœƒè‡ªå‹•é‹è¡Œæ¸¬è©¦
```

### æ­¥é©Ÿ 4: é©—è­‰ GitHub Actions

```bash
# Push åˆ° GitHub è§¸ç™¼è‡ªå‹•æ¸¬è©¦
git add .
git commit -m "Setup automated testing"
git push

# æŸ¥çœ‹ Actions çµæœï¼š
# GitHub å€‰åº« â†’ Actions æ¨™ç±¤ â†’ æœ€æ–°çš„ workflow run
```

## ğŸ® ä½¿ç”¨å ´æ™¯æŒ‡å—

### å ´æ™¯ 1: æ—¥å¸¸é–‹ç™¼

```bash
# é–‹ç™¼è€… A ä¿®æ”¹äº† SEO è©•ä¼°é‚è¼¯
vim lib/app/running-the-tests/assessments/seo-assessor.service.ts

# å¿«é€Ÿæ¸¬è©¦ä¿®æ”¹æ˜¯å¦æ­£ç¢º
make test-api
# æˆ–
npm run test:api

# çœ‹åˆ°çµæœï¼š
# âœ… Returned 15 assessments (expected: 15)
# âœ… SEO: 11, Readability: 4
```

### å ´æ™¯ 2: æ–°å¢è©•ä¼°é …ç›®

```bash
# é–‹ç™¼è€… B æ–°å¢äº†ä¸€å€‹è©•ä¼°é¡å‹
vim lib/app/running-the-tests/types/assessment.types.ts

# ç¢ºä¿ ID ä¸€è‡´æ€§
npm run test:ids

# ç¢ºä¿ API ä»è¿”å›æ­£ç¢ºæ•¸é‡
npm run test:api

# é æœŸï¼šå¯èƒ½éœ€è¦æ›´æ–°æ¸¬è©¦æ•¸é‡å¾ 15 â†’ 16
```

### å ´æ™¯ 3: æº–å‚™ç™¼å¸ƒ

```bash
# é‹è¡Œå®Œæ•´æ¸¬è©¦å¥—ä»¶
make pre-commit
# æˆ–
npm run test:all

# å¦‚æœé€šéï¼Œå®‰å…¨ commit
git commit -m "Ready for release"

# GitHub Actions æœƒè‡ªå‹•é‹è¡Œä¸¦é©—è­‰
```

### å ´æ™¯ 4: ç·Šæ€¥ä¿®å¾©

```bash
# å¿«é€Ÿé©—è­‰ä¿®å¾©ä¸æœƒç ´å£æ ¸å¿ƒåŠŸèƒ½
npm run test:api

# å¦‚æœç·Šæ€¥ï¼Œå¯ä»¥è·³éå®Œæ•´æ¸¬è©¦
git commit -m "hotfix: urgent bug fix"

# ä½†ä»æœƒè§¸ç™¼ GitHub Actions é©—è­‰
```

## ğŸ¯ ä¸åŒåœ˜éšŠè§’è‰²çš„ä½¿ç”¨æ–¹å¼

### ğŸ‘¨â€ğŸ’» å‰ç«¯é–‹ç™¼è€…
```bash
# ç¢ºä¿ API å¥‘ç´„æ²’æœ‰æ”¹è®Š
npm run test:api

# é‡é»é—œæ³¨ï¼š
# - è©•ä¼°æ•¸é‡æ˜¯å¦æ­£ç¢ºï¼ˆ15 é …ï¼‰
# - API éŸ¿æ‡‰æ ¼å¼æ˜¯å¦ä¸€è‡´
# - éŒ¯èª¤è™•ç†æ˜¯å¦æ­£å¸¸
```

### ğŸ”§ å¾Œç«¯é–‹ç™¼è€…
```bash
# ç¢ºä¿é‚è¼¯ä¿®æ”¹ä¸ç ´å£ API
npm run test:all

# é‡é»é—œæ³¨ï¼š
# - æ‰€æœ‰è©•ä¼°é‚è¼¯æ­£ç¢ºé‹è¡Œ
# - ID å‘½åä¸€è‡´æ€§
# - æ–°å¢åŠŸèƒ½å‘ä¸‹å…¼å®¹
```

### ğŸ“ å…§å®¹/æ–‡æª”ç¶­è­·è€…
```bash
# ç¢ºä¿æ–‡æª”èˆ‡ç¨‹å¼ç¢¼åŒæ­¥
npm run test:ids

# é‡é»é—œæ³¨ï¼š
# - CLAUDE.md è©•ä¼° ID æ­£ç¢º
# - API æ–‡æª”æè¿°æº–ç¢º
# - ç¯„ä¾‹ç¨‹å¼ç¢¼å¯é‹è¡Œ
```

### ğŸš€ DevOps/éƒ¨ç½²è² è²¬äºº
```bash
# é©—è­‰æ•´å€‹ CI/CD æµç¨‹
make deploy

# é‡é»é—œæ³¨ï¼š
# - GitHub Actions é‹è¡ŒæˆåŠŸ
# - Vercel éƒ¨ç½²æ­£å¸¸
# - ç”Ÿç”¢ç’°å¢ƒæ¸¬è©¦é€šé
```

## ğŸ“Š æ¸¬è©¦æŒ‡æ¨™èˆ‡ç›£æ§

### é—œéµæŒ‡æ¨™
- **API éŸ¿æ‡‰æ™‚é–“** < 2 ç§’
- **è©•ä¼°æ•¸é‡æº–ç¢ºæ€§** = 100%ï¼ˆ15 é …ï¼‰
- **æ¸¬è©¦é€šéç‡** > 95%
- **ID ä¸€è‡´æ€§** = 100%

### ç›£æ§æ–¹å¼
```bash
# æœ¬åœ°ç›£æ§
npm run test:api 2>&1 | grep "âœ…\|âŒ" | wc -l

# CI ç›£æ§ï¼ˆGitHub Actions è‡ªå‹•ï¼‰
# å¤±æ•—æ™‚æœƒç™¼é€ email é€šçŸ¥

# ç”Ÿç”¢ç›£æ§ï¼ˆå¯æ“´å±•ï¼‰
# æœªä¾†å¯æ·»åŠ  health check endpoint
```

## ğŸ”„ æ¸¬è©¦ç¶­è­·æŒ‡å—

### å®šæœŸç¶­è­·ä»»å‹™

#### æ¯é€±
- [ ] é‹è¡Œå®Œæ•´æ¸¬è©¦å¥—ä»¶ `npm run test:all`
- [ ] æª¢æŸ¥ GitHub Actions æ­·å²è¨˜éŒ„
- [ ] æ›´æ–°æ¸¬è©¦ç”¨ä¾‹ï¼ˆå¦‚æœ‰ API æ”¹å‹•ï¼‰

#### æ¯æœˆ
- [ ] æª¢æŸ¥æ¸¬è©¦è¦†è“‹ç‡
- [ ] æ›´æ–°ä¾è³´ç‰ˆæœ¬
- [ ] æª¢è¨æ¸¬è©¦å¤±æ•—æ¨¡å¼

#### æ¯å­£åº¦
- [ ] è©•ä¼°æ¸¬è©¦æ¶æ§‹
- [ ] æ·»åŠ æ–°æ¸¬è©¦å ´æ™¯
- [ ] å„ªåŒ–æ¸¬è©¦æ•ˆèƒ½

### æ–°å¢æ¸¬è©¦æ­¥é©Ÿ

1. **è­˜åˆ¥éœ€æ±‚**
   ```
   å•é¡Œï¼šæ–°åŠŸèƒ½æ²’æœ‰æ¸¬è©¦è¦†è“‹
   ç›®æ¨™ï¼šæ·»åŠ ç›¸æ‡‰æ¸¬è©¦
   ```

2. **å‰µå»ºæ¸¬è©¦æ–‡ä»¶**
   ```bash
   # å‰µå»ºæ–°æ¸¬è©¦
   touch test/new-feature.test.js
   
   # ç·¨è¼¯æ¸¬è©¦é‚è¼¯
   vim test/new-feature.test.js
   ```

3. **æ›´æ–°é…ç½®**
   ```bash
   # æ›´æ–° package.json
   vim package.json  # æ·»åŠ  test:new-feature script
   
   # æ›´æ–° Makefile
   vim Makefile     # æ·»åŠ å°æ‡‰å‘½ä»¤
   ```

4. **æ¸¬è©¦é©—è­‰**
   ```bash
   # é‹è¡Œæ–°æ¸¬è©¦
   npm run test:new-feature
   
   # æ•´åˆåˆ°å®Œæ•´æ¸¬è©¦
   npm run test:all
   ```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

#### å•é¡Œ 1: æ¸¬è©¦è¶…æ™‚
```bash
# ç¾è±¡
Error: Request timeout after 30000ms

# è§£æ±º
1. æª¢æŸ¥ API æœå‹™å™¨ç‹€æ…‹ï¼šcurl http://localhost:3000
2. å¢åŠ è¶…æ™‚è¨­å®šï¼šexport TEST_TIMEOUT=60000
3. æª¢æŸ¥ç¶²è·¯é€£æ¥
```

#### å•é¡Œ 2: è©•ä¼°æ•¸é‡ä¸æ­£ç¢º
```bash
# ç¾è±¡
âŒ Expected 15 assessments, got 12

# è§£æ±º
1. æª¢æŸ¥ API é‚è¼¯æ˜¯å¦æœ‰ bug
2. æŸ¥çœ‹ assessment.types.ts æ˜¯å¦æœ‰æ–°å¢/ç§»é™¤
3. ç¢ºèªæ¸¬è©¦ç›®æ¨™ç’°å¢ƒæ­£ç¢º
```

#### å•é¡Œ 3: GitHub Actions å¤±æ•—
```bash
# ç¾è±¡
Actions é¡¯ç¤ºç´…è‰² âŒ

# è§£æ±º
1. æŸ¥çœ‹ Actions è©³ç´°æ—¥èªŒ
2. æœ¬åœ°é‡ç¾å•é¡Œï¼šnpm run test:all
3. æª¢æŸ¥ .github/workflows/test.yml é…ç½®
```

#### å•é¡Œ 4: ID ä¸€è‡´æ€§æ¸¬è©¦å¤±æ•—
```bash
# ç¾è±¡
âŒ API returned ID "H1_MISSING" but not found in enum

# è§£æ±º
1. æª¢æŸ¥ regex æ¨¡å¼æ˜¯å¦æ­£ç¢º
2. ç¢ºèª enum å®šç¾©æ ¼å¼
3. æš«æ™‚æ¨™è¨˜ç‚ºéé˜»å¡æ€§éŒ¯èª¤
```

## ğŸ“ˆ æ•ˆèƒ½å„ªåŒ–å»ºè­°

### æ¸¬è©¦åŸ·è¡Œå„ªåŒ–
```bash
# ä¸¦è¡Œé‹è¡Œæ¸¬è©¦ï¼ˆæœªä¾†å¯å¯¦ç¾ï¼‰
npm run test:api & npm run test:ids & wait

# ä½¿ç”¨æ¸¬è©¦ç·©å­˜
export NODE_ENV=test

# æ¸›å°‘æ¸¬è©¦æ•¸æ“šé‡
# ä½¿ç”¨æ›´ç°¡å–®çš„ HTML å…§å®¹é€²è¡Œæ¸¬è©¦
```

### CI/CD å„ªåŒ–
```yaml
# GitHub Actions å„ªåŒ–å»ºè­°
- ä½¿ç”¨ cache æ¸›å°‘å®‰è£æ™‚é–“
- ä¸¦è¡Œé‹è¡Œä¸åŒæ¸¬è©¦
- åªåœ¨ç‰¹å®šæ¢ä»¶ä¸‹é‹è¡Œè€—æ™‚æ¸¬è©¦
```

é€™å€‹æŒ‡å—å°‡å¹«åŠ©åœ˜éšŠæˆå“¡ï¼š
- ğŸ¯ **ç†è§£æ¸¬è©¦æ¶æ§‹**
- ğŸš€ **å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨** 
- ğŸ”§ **è§£æ±ºå¸¸è¦‹å•é¡Œ**
- ğŸ“ˆ **æŒçºŒæ”¹é€²æ¸¬è©¦**